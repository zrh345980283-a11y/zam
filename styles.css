:root{--primary:#7B1FA2;--accent:#9C27B0;--dark:#7B1FA2;--bg:#FAF5FB;--text:#5E3E8E;--muted:#B08AC8;--card:#ffffff;--border:#E1BEE7}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:linear-gradient(180deg,#FDF4FF,#F3E5F5);color:var(--text);font-family:"Microsoft YaHei", "Segoe UI", system-ui, -apple-system, Arial;position:relative}
body::before{content:"";position:fixed;inset:0;background-image:none;opacity:0;pointer-events:none}
.app-header{display:flex;align-items:center;justify-content:space-between;padding:12px 20px;background:#F3E5F5;border-bottom:1px solid var(--border);min-height:60px}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:36px;height:36px;border-radius:8px;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600}
.title{font-size:20px;font-weight:600}
.top-nav{display:flex;align-items:center;gap:20px}
.top-nav.hidden{display:none}
.nav-btn,.nav-link{border:1px solid var(--border);background:#F7ECFB;width:100px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:999px;color:var(--text);font-size:16px;box-shadow:0 4px 10px rgba(123,31,162,.1)}
.nav-btn.active{background:#8E24AA;color:#fff;border-color:#8E24AA}
.nav-btn:hover,.nav-link:hover{background:#eaf5f3}
.spacer{flex:1}
.container{width:85vw;margin:20px 7.5vw;padding:8vh 0 0}
.logged .container{padding:20px 20px 0}
.card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:16px;margin-bottom:16px;box-shadow:0 4px 10px rgba(123,31,162,.1)}
.login-card{width:420px;padding:20px;margin:32px auto;position:relative;border:1px solid transparent;border-radius:10px;box-shadow:0 4px 10px rgba(123,31,162,0.08);background:
 linear-gradient(#fff,#fff) padding-box,
 linear-gradient(90deg,#E1BEE7,#D8BFD8) border-box}
.login-card h2{font-weight:700;margin:0 0 8px;font-size:26px;background:linear-gradient(45deg,#9C27B0,#7B1FA2);-webkit-background-clip:text;background-clip:text;color:transparent}
.divider{height:1px;background:#E1BEE7;margin:8px 0}
.decor-flower{position:absolute;right:12px;top:12px;width:20px;height:20px;background-image:url('images/细胞核.jpg');background-size:cover;background-position:center;border-radius:50%;box-shadow:0 0 0 1px #E1BEE7}
.hidden{display:none}
.primary{background:linear-gradient(45deg,#AB47BC,#8E24AA);color:#fff;border:none;padding:10px 16px;border-radius:8px;transition:.2s}
.primary:hover{box-shadow:0 4px 12px rgba(123,31,162,.18)}
.secondary{background:#efe7ff;color:var(--accent);border:none;padding:10px 16px;border-radius:8px}
.form-row{display:flex;gap:20px;margin:10px 0;align-items:center;justify-content:center}
.form-row label{width:100px;text-align:right}
#login-section .form-row label{text-align:left}
.radio-group{display:flex;gap:16px}
.role-cards{display:flex;gap:12px;justify-content:center}
.role-btn{border:1px solid var(--border);background:#F3E5F5;color:#7B1FA2;width:120px;height:40px;border-radius:20px;cursor:pointer;transition:transform .15s ease, box-shadow .2s;font-size:16px;display:flex;align-items:center;justify-content:center}
.role-btn:hover{transform:scale(1.02);box-shadow:0 5px 10px rgba(123,31,162,.1)}
.role-btn.selected{background:#7B1FA2;color:#fff;border-color:#7B1FA2}
.tabs{display:flex;gap:25px;justify-content:center;margin:10px 0 20px;background:linear-gradient(180deg,#F8EBFA,#F3E5F5);padding:6px 15px;border-radius:8px;border-bottom:1.5px solid #7B1FA2;align-items:center;min-height:70px}
.tab{width:220px;height:70px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#F8EBFA,#F3E5F5);color:#7B1FA2;border:1px solid #D8BFD8;border-radius:10px;font-size:22px;font-weight:700;box-shadow:0 4px 10px rgba(123,31,162,.1)}
.tab.active{background:#FDF4FF;border-color:#7B1FA2;color:#7B1FA2}
.tabs .tab.active[data-tab="stu-res"], .tabs .tab.active[data-tab="tea-res"]{border-width:2.5px;border-color:#9C27B0}
.tab:hover{filter:brightness(1.08)}
.panels{background:transparent}
.panel{display:none}
.panel.active{display:block}
.panel-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
/* 核小助标题居中与图标 */
#stu-ai .panel-header,#tea-ai .panel-header{position:relative;justify-content:center}
#stu-ai .panel-header .actions{position:absolute;right:0;top:50%;transform:translateY(-50%)}
.title-wrap{display:flex;align-items:center;gap:12px}
.assistant-icon{width:42px;height:42px;border-radius:8px;object-fit:cover;border:1px solid var(--border)}
.assistant-icon{width:60px;height:60px}
.coze-row{display:flex;align-items:center;gap:12px;margin-top:10px}
/* Coze chat embed container */
#coze-chat{flex:1;min-height:480px}
/* 学习资源中心标题居中与分层 */
#stu-res .panel-header{position:relative;justify-content:center;border-bottom:1px solid #7B1FA2;padding-bottom:8px;margin-bottom:20px}
#stu-res .panel-header h3{font-size:28px;font-weight:700;color:#7B1FA2;margin:0}
#stu-res .panel-header .actions{position:absolute;right:0;top:50%;transform:translateY(-50%)}
/* 同步学生端其它面板标题样式 */
#stu-ai .panel-header,
#stu-assess .panel-header,
#stu-task .panel-header{position:relative;justify-content:center;border-bottom:1px solid #7B1FA2;padding-bottom:8px;margin-bottom:20px}
#stu-ai .panel-header h3,
#stu-assess .panel-header h3,
#stu-task .panel-header h3{font-size:28px;font-weight:700;color:#7B1FA2;margin:0}
#stu-ai .panel-header .actions,
#stu-assess .panel-header .actions,
#stu-task .panel-header .actions{position:absolute;right:0;top:50%;transform:translateY(-50%)}
.ai-chat{display:flex;flex-direction:column;gap:10px}
.history{min-height:220px;background:rgba(248,235,250,.85);border:1px solid #D8BFD8;border-radius:10px;padding:12px;overflow:auto}
.ai-chat{display:flex;flex-direction:column;gap:10px;position:relative}
.ai-chat{background:linear-gradient(#FDF4FF,#F3E5F5);border-radius:8px;padding:16px}
.chat-flower{position:absolute;right:8px;top:8px;width:18px;height:18px;border-radius:50%;background:
 radial-gradient(circle at 50% 0%, #9C27B0 0 5px, transparent 6px),
 radial-gradient(circle at 0% 50%, #9C27B0 0 5px, transparent 6px),
 radial-gradient(circle at 100% 50%, #9C27B0 0 5px, transparent 6px),
 radial-gradient(circle at 50% 100%, #9C27B0 0 5px, transparent 6px),
 radial-gradient(circle at 50% 50%, #7B1FA2 0 4px, transparent 5px)}
.agent-cards{width:95%;margin:18px auto 20px;background:#F8EBF8;border-radius:12px;padding:15px;display:flex;flex-direction:column;gap:12px}
.agent-card{background:#FFF;border:1px solid #E0C9E9;border-radius:8px;padding:10px}
.agent-title{font-size:16px;color:#7B1FA2;font-weight:700;margin-bottom:8px}
.agent-tip{font-size:12px;color:#666;margin:0 0 8px}
.agent-row{display:flex;gap:10px;align-items:center}
.agent-row.right{justify-content:flex-end}
.agent-out{margin-top:8px;color:#333;line-height:1.5;font-size:14px}
.agent-preview img{max-width:100%;height:auto;border-radius:8px;border:1px solid #E1BEE7}
.agent-btn{transition:transform .2s ease, filter .2s ease}
.agent-btn:hover{transform:scale(1.02);filter:brightness(1.05)}
.spinner{width:16px;height:16px;border:2px solid #E1BEE7;border-top-color:#7B1FA2;border-radius:50%;animation:spin .8s linear infinite}
.spinner.hidden{display:none}
.composer{display:flex;gap:8px}
.composer input{flex:1;padding:10px;border:none;border-bottom:2px solid #7B1FA2;border-radius:0;background:transparent}
.composer input:focus{outline:none;border-bottom:3px solid #7B1FA2}
.composer input::placeholder{color:#CE93D8}
.composer .primary{background:linear-gradient(45deg,#9C27B0,#7B1FA2);border-radius:8px}
.composer .primary:hover{filter:brightness(1.08)}
#stu-voice,#stu-clear-ai{padding:6px 10px;border-radius:999px;font-size:13px}
/* 学习资源中心内容区 */
#stu-res .grid{grid-template-columns:48% 48%;column-gap:2%;row-gap:20px;margin:20px 0}
.resource-card{display:flex;flex-direction:column;border-radius:8px}
.resource-card .title{margin-bottom:8px;text-align:center}
.video-wrap{position:relative;width:100%;aspect-ratio:16/9;max-width:640px;margin:0 auto;overflow:hidden;border:1px solid var(--border);border-radius:8px}
.video-wrap video,.video-wrap iframe{width:100%;height:100%;border:none;border-radius:0;display:block;object-fit:contain;background:#000}
.video-tip{position:absolute;left:12px;top:12px;background:rgba(255,255,255,.85);color:#000;padding:6px 10px;font-size:14px;border-radius:6px}
/* 下拉菜单尺寸与阴影 */
#res-filter{width:80px;height:32px;font-size:14px;line-height:32px;text-align-last:center;appearance:none;-webkit-appearance:none;-moz-appearance:none;padding-right:24px;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="%237B1FA2"><path d="M7 10l5 5 5-5z"/></svg>') right 8px center no-repeat;background-size:12px 12px}
#res-filter:focus{box-shadow:0 8px 20px rgba(123,31,162,.15)}
input,select,textarea{min-height:46px;border:1px solid #E1BEE7;border-radius:6px;padding:12px;font-size:16px}
input:focus,select:focus,textarea:focus{outline:none;border-color:#7B1FA2;box-shadow:0 0 0 2px rgba(123,31,162,.12)}
input::placeholder,textarea::placeholder{color:#CE93D8}
.form-row label{color:#A678C0}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
#tea-assess .grid-2{grid-template-columns:3fr 2fr}
.list{display:flex;flex-direction:column;gap:8px}
.text{white-space:pre-wrap;line-height:1.6}
.uploader{display:flex;flex-direction:column;gap:8px}
.viewer3d{height:340px;border:1px solid var(--border);border-radius:8px;background:#fff;margin-top:8px}
.labels{display:flex;gap:8px;margin-top:8px}
.labels input{flex:1;padding:10px;border:1px solid var(--border);border-radius:8px}
.heatmap{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.heatcell{padding:10px;border-radius:6px;text-align:center;color:#fff}
.tip{margin-top:8px;padding:10px;border:1px solid #7B1FA2;background:#F3E5F5;color:#7B1FA2;border-radius:8px}
.login-card #login-btn{display:block;margin:12px auto 0}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:820px;max-height:80vh;overflow:auto;background:#fff;border:1px solid var(--border);border-radius:10px;padding:16px;display:none}
.modal-header{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);padding-bottom:8px;margin-bottom:8px}
.app-footer{text-align:center;color:var(--muted);padding:16px}
@media (max-width:992px){.grid-2{grid-template-columns:1fr}.grid{grid-template-columns:1fr 1fr}.modal{width:96vw}}
@media (orientation: landscape) and (max-width: 1024px){.login-card{width:70vw}}
.task-module{background:#F3E5F5;border:1px solid var(--border);border-radius:8px;margin-bottom:20px}
.task2-module{background:linear-gradient(135deg,#F8EBF8,#F3E5F5);position:relative;padding:15px 20px}
.task3-module{background:linear-gradient(135deg,#F8EBF8,#F3E5F5);position:relative;padding:15px 20px}
.task-module h4{color:#7B1FA2;font-weight:800;text-align:left;margin:0 0 12px;font-size:20px}
.task2-module h4{font-size:20px;position:relative}
.task3-module h4{font-size:20px;position:relative}
.task2-module h4::after{content:"";display:block;height:2px;background:#E1BEE7;margin-top:6px;width:100%}
.task3-module h4::after{content:"";display:block;height:2px;background:#E1BEE7;margin-top:6px;width:100%}
.task2-module .module-decor{position:absolute;right:12px;top:10px;width:28px;height:28px;opacity:.2;background:
 radial-gradient(circle at 55% 45%, #9C27B0 0 6px, transparent 7px),
 radial-gradient(circle at 50% 50%, rgba(123,31,162,.6) 0 12px, transparent 13px),
 radial-gradient(circle at 50% 50%, rgba(123,31,162,.35) 12px, rgba(123,31,162,.1) 18px)}
.task3-module .module-decor{position:absolute;right:12px;top:10px;width:28px;height:28px;opacity:.2;background:
 radial-gradient(circle at 55% 45%, #9C27B0 0 6px, transparent 7px),
 radial-gradient(circle at 50% 50%, rgba(123,31,162,.6) 0 12px, transparent 13px),
 radial-gradient(circle at 50% 50%, rgba(123,31,162,.35) 12px, rgba(123,31,162,.1) 18px)}
.task-module .actions{display:flex;justify-content:center}
.task2-module .actions{justify-content:flex-start}
.task-module .actions-right{display:flex;justify-content:flex-end}
.subtask-module.task-module{margin-bottom:10px}
.subtasks{display:flex;flex-direction:column;gap:15px;box-shadow:inset 0 1px 8px rgba(255,255,255,.6);border-radius:8px;padding:10px 0;padding-left:12px}
.task3-module .subtasks{gap:10px}
.subtask{display:flex;flex-direction:column;align-items:flex-start}
.subtask-line{display:flex;align-items:center;justify-content:flex-start;width:100%}
.task-title-line{display:flex;align-items:center;justify-content:flex-start;width:100%}
.task-title-line h4{margin-right:10px}
.subtask-line h5{margin-right:10px}
.subtask-line .actions,.task-title-line .actions{margin-left:auto;display:flex;justify-content:flex-end;padding-right:18px}
.subtask-line .actions .entry-btn,.task-title-line .actions .entry-btn{width:300px}
.subtask-line .actions .primary,.subtask-line .actions .secondary,
.task-title-line .actions .primary,.task-title-line .actions .secondary{width:300px}
.task3-module .subtask h5{text-indent:2em}
.subtask h5{color:#7B1FA2;font-size:16.5px;font-weight:600;margin:0 0 10px;position:relative;padding-left:12px;line-height:1.5}
.subtask h5::before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:4px;border-radius:50%;background:#7B1FA2}
.subtask h5::after{content:none;display:none}
.entry-btn{background:linear-gradient(45deg,#8A2BE2,#7B1FA2);color:#fff;border:none;padding:0 20px;border-radius:10px;transition:.2s;display:inline-flex;align-items:center;justify-content:center;height:34px;font-size:15px;box-shadow:0 0 0 2px #E1BEE7, 0 4px 10px rgba(123,31,162,.18)}
.entry-btn:hover{filter:brightness(1.08)}
.entry-btn:hover{transform:scale(1.02);background:linear-gradient(45deg,#7B1FA2,#8A2BE2)}
.primary,.secondary{font-size:15px;min-height:34px}
.model-photo{width:100%;height:auto;border-radius:8px;margin-top:8px;display:none}
.plane-photo{width:90%;max-width:90%;height:auto;border-radius:8px;margin-top:8px;display:none}
.plane-title{display:none}
.plane-title::before{display:none}
.btn-loader{display:inline-block;width:16px;height:16px;border:2px solid #E1BEE7;border-top-color:#7B1FA2;border-radius:50%;margin-left:8px;animation:spin .8s linear infinite;vertical-align:middle}
@keyframes spin{to{transform:rotate(360deg)}}
.task-content{background:#F3E5F5;border:1px solid var(--border);border-radius:8px;margin:10px 0 0;padding:12px}
.task-content video,.task-content iframe{width:100%;height:360px;border:none;border-radius:8px}
.task-content.model-expanded{background:#F3E5F5;border:1px solid var(--border);border-radius:8px;margin:10px 0 0;padding:0;width:100%;max-width:1600px}
.task-content.model-expanded iframe{width:100%;height:max(800px,80vh);border:none;border-radius:8px;display:block}
.msg{display:flex;align-items:flex-end;margin:8px 0}
.msg.ai{justify-content:flex-start}
.msg.user{justify-content:flex-end}
.avatar{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 8px;color:#fff;font-size:12px}
.avatar.ai{background:#8E24AA}
.avatar.user{background:#A678C0}
.bubble{max-width:70%;padding:8px 12px;border-radius:10px;border:1px solid #D8BFD8;color:#5E3E8E}
.msg.ai .bubble{background:linear-gradient(180deg,#FDF4FF,#F3E5F5)}
.msg.user .bubble{background:#F8EBFA}
/* 学情评测中心绿主题适配 */
#stu-assess .panel-header h3{color:#7B1FA2}
#stu-assess .card{border-color:#D8BFD8;border-radius:8px;box-shadow:0 2px 8px rgba(123,31,162,.1);padding:15px 10px}
#stu-assess .primary{background:linear-gradient(45deg,#9C27B0,#7B1FA2);color:#fff}
#stu-assess .secondary{background:#F3E5F5;color:#7B1FA2}
#stu-assess .primary:hover,#stu-assess .secondary:hover{filter:brightness(1.08)}
#stu-assess .result .score{font-size:20px;font-weight:700;color:#7B1FA2}
#stu-assess .result .blind{margin:20px 0;display:inline-flex;align-items:center;gap:8px;padding:8px 14px;background:#F3E5F5;border-radius:999px;color:#7B1FA2;font-size:1.2em;font-weight:700}
#stu-assess .result .score{font-size:28px}
#stu-assess .analysis-card{border:1px solid #D8BFD8;border-radius:8px;box-shadow:0 2px 8px rgba(123,31,162,.1)}
#stu-assess .analysis-card{padding:18px 14px}
#stu-assess .analysis-card h4,#stu-assess .chart-card h4{text-align:center;color:#7B1FA2;margin:0 0 8px}
#stu-assess .analysis-card h4{font-size:1.4em;font-weight:800}
#stu-assess .chart-card h4{font-size:1.4em;font-weight:800}
#stu-assess #analysis-list{line-height:1.5;font-size:1.4em}
#analysis-list .item{margin:10px 0}
#analysis-list .item .err{color:#7B1FA2;font-weight:700}
#analysis-list .item .exp{color:#BA68C8}
#analysis-list .item .exp .std{color:#7B1FA2;font-weight:800}
#stu-assess .chart-card{border:1px solid #D8BFD8;border-radius:8px;box-shadow:0 2px 8px rgba(123,31,162,.1)}
#stu-assess .form .fill-four{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px}
#stu-assess .form .image-wrap{display:flex;align-items:center;justify-content:center;background:#fff;border:1px solid #F3E5F5;border-radius:8px;padding:8px;box-shadow:0 2px 8px rgba(123,31,162,.1)}
#stu-assess .form .image-wrap img{max-width:100%;height:auto}
#stu-assess .form .check-tip{margin-top:6px;color:#BA68C8;font-size:16px}
#stu-assess .row-line{display:flex;gap:20px;align-items:baseline;justify-content:flex-start}
#stu-assess .q-text{font-size:18px;color:#7B1FA2;text-align:left}
#stu-assess .radio-group{display:flex;gap:10px;align-items:baseline}
#stu-assess .radio-group label{position:relative;display:inline-flex;align-items:center;gap:0}
#stu-assess .radio-group input{appearance:none;position:absolute;opacity:0;width:0;height:0}
#stu-assess .radio-group span{width:40px;height:40px;border:1px solid #F3E5F5;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:18px;color:#7B1FA2;font-weight:600}
#stu-assess .radio-group input:checked+span{background:#7B1FA2;color:#fff;border-color:#7B1FA2}
#stu-assess .fill-actions{display:flex;gap:15px;margin-top:8px}
#stu-assess .fill-actions .primary,#stu-assess .fill-actions .secondary{width:120px}
#login-section input{width:280px;font-size:16px;color:var(--text);border:1px solid #D8BFD8;border-radius:8px}
#login-section input::placeholder{color:#BA68C8}
#login-section #login-btn{width:280px}
#login-section .form-row label{font-size:18px;color:#7B1FA2}
#stu-assess .submit-center{display:flex;justify-content:center;margin-top:8px}
#stu-assess .submit-center .primary{width:240px}
#tea-assess #tea-bar,#tea-assess #tea-pie{width:70%;display:block;margin:0 auto}
#tea-assess .suggest-card{background:#F3E5F5;border:1px solid var(--border);border-radius:8px}
#tea-assess .suggest-card h4{color:#7B1FA2;font-size:20px;font-weight:800;text-align:center;margin:0 0 8px}
#tea-assess .suggest-card .text{color:#BA68C8;font-size:16px;line-height:1.5}

@media (max-width:768px){
  .subtask{align-items:flex-start}
  .subtask-line,.task-title-line{flex-wrap:wrap}
  .subtask-line .actions,.task-title-line .actions{width:100%;justify-content:flex-end;margin-top:6px}
  .agent-cards{width:100%;padding:12px}
  .agent-row{flex-wrap:wrap}
  .agent-row.right{justify-content:flex-end}
  .subtask-line .actions .entry-btn,.task-title-line .actions .entry-btn,
  .subtask-line .actions .primary,.subtask-line .actions .secondary,
  .task-title-line .actions .primary,.task-title-line .actions .secondary{width:100%}
  .task-module .actions{justify-content:center}
}
